<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Dialogue: Gemini & Cohere</title>
<style>
body {
  font-family: Arial, sans-serif;
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
  background: #f0f0f0;
}
h1 {
  text-align: center;
  color: #333;
}
#chat {
  height: 400px;
  overflow-y: auto;
  border: 1px solid #ccc;
  padding: 10px;
  background: #fff;
  margin-bottom: 10px;
}
#userInput {
  width: 60%;
  padding: 5px;
}
#sendBtn, #stopBtn {
  width: 18%;
  padding: 5px;
  margin-left: 1%;
}
.ai-message {
  margin-bottom: 10px;
  padding: 10px;
  border-radius: 5px;
  font-size: 14px;
  line-height: 1.4;
}
.gemini {
  background: #e6f3ff;
  border-left: 4px solid #4285f4;
}
.cohere {
  background: #fff0f5;
  border-left: 4px solid #ff69b4;
}
.analysis {
  font-style: italic;
  color: #666;
}
.agreement {
  font-weight: bold;
  color: #008000;
}
</style>
</head>
<body>
<h1>AI Dialogue: Gemini & Cohere</h1>
<div id="chat"></div>
<input type="text" id="userInput" placeholder="Enter your prompt...">
<button id="sendBtn">Send</button>
<button id="stopBtn">Stop</button>

<script>
const API_KEY_GEMINI = 'AIzaSyDYEwA6CjGKgURbUUBsrsKQC0kpBCjdAxY';
const API_KEY_COHERE = 'VPoGothnM9yPMylSmGJPRpZpVwrjwJJvuapYmyZ9';
const chat = document.getElementById('chat');
const userInput = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');
const stopBtn = document.getElementById('stopBtn');

let isDialogueRunning = false;

sendBtn.addEventListener('click', () => startDialogue(userInput.value));
stopBtn.addEventListener('click', stopDialogue);

async function startDialogue(prompt) {
  if (isDialogueRunning) return;
  isDialogueRunning = true;
  let currentAI = Math.random() < 0.5 ? 'Gemini' : 'Cohere';
  let otherAI = currentAI === 'Gemini' ? 'Cohere' : 'Gemini';
  
  while (isDialogueRunning) {
    let response = await getAIResponse(currentAI, prompt);
    displayMessage(currentAI, response);
    
    if (response.toLowerCase().includes('agreed')) {
      displayMessage('System', 'Conversation ended with agreement.');
      break;
    }
    
    let analysis = await getAIResponse(otherAI, `Analyze this response: "${response}". Do you agree? If not, why?`);
    displayMessage(otherAI, analysis, true);
    
    if (analysis.toLowerCase().includes('agreed')) {
      displayMessage('System', 'Conversation ended with agreement.');
      break;
    }
    
    [currentAI, otherAI] = [otherAI, currentAI];
    prompt = analysis;
    
    await new Promise(resolve => setTimeout(resolve, 1000)); // Pause for readability
  }
  
  isDialogueRunning = false;
}

async function getAIResponse(ai, prompt) {
  if (ai === 'Gemini') {
    return getGeminiResponse(prompt);
  } else {
    return getCohereResponse(prompt);
  }
}

async function getGeminiResponse(prompt) {
  const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-002:generateContent?key=${API_KEY_GEMINI}`, {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({contents: [{parts: [{text: prompt}]}]})
  });
  const data = await response.json();
  return data.candidates[0].content.parts[0].text;
}

async function getCohereResponse(prompt) {
  const response = await fetch('https://api.cohere.ai/v1/generate', {
    method: 'POST',
    headers: {'Authorization': `BEARER ${API_KEY_COHERE}`, 'Content-Type': 'application/json'},
    body: JSON.stringify({
      model: 'command',
      prompt,
      max_tokens: 300,
      temperature: 0.9,
      k: 0,
      stop_sequences: ["Human:"],
      return_likelihoods: 'NONE'
    })
  });
  const data = await response.json();
  return data.generations[0].text;
}

function displayMessage(ai, message, isAnalysis = false) {
  const div = document.createElement('div');
  div.className = `ai-message ${ai.toLowerCase()}`;
  if (isAnalysis) {
    div.classList.add('analysis');
  }
  div.textContent = `${ai}: ${message}`;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

function stopDialogue() {
  isDialogueRunning = false;
  displayMessage('System', 'Conversation stopped by user.');
}
</script>
</body>
</html>
